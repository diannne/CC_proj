//===========================================================================
//===========================================================================
//===========================================================================
//==      ColorTransfer.h   ==   Author: Diana-Maria Popa       ==
//===========================================================================
//===========================================================================
//===========================================================================

//===========================================================================
//===========================================================================
#ifndef __COLORTRANSFER__H__
#define __COLORTRANSFER__H__
//===========================================================================
//===========================================================================

//===========================================================================
//===========================================================================
#include "MatrixModule.h"
#include "PdfTransfer.h"
//===========================================================================
//===========================================================================

//===========================================================================
//===========================================================================

class ColorTransfer {
public:
    //constructor with input image, palette image and iterations
    ColorTransfer(KImage *input, KImage *target, unsigned int iterations = 10);
    KImage * applyRecoloring();
    bool saveImage();
    ~ColorTransfer();
private:
    float * _inputImage;
    float * _palette;
    unsigned int _iterations;
    float **_rotations;
    void generateRotationMatrix();
    float adjustPixel(float);
    MatrixModule *_matrixModule;
    PdfTransfer *_pdfTransfer;
    KImage * _input;
    KImage * _gradedImage;
    KImage * _paletteImage;
};
#endif